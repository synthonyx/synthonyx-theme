{{ define "main" }}
{{/* 
  Page Layout - Visible Engineering Style
  - Single page/post content
  - Grid layout with hard borders
*/}}
<article class="border-b border-white/20">
  
  {{/* Page Header */}}
  <header class="p-8 lg:p-16 border-b border-white/20">
    <div class="flex items-center gap-3 mb-6">
      <span class="w-8 h-px bg-white/20"></span>
      <span class="font-mono text-xs uppercase tracking-widest text-gray-500">
        {{ with .Section }}{{ . | title }}{{ else }}Page{{ end }}
      </span>
    </div>
    
    <h1 class="font-heading font-black uppercase tracking-wider text-3xl md:text-4xl lg:text-5xl text-white leading-tight">
      {{ .Title }}
    </h1>
    
    {{/* Meta */}}
    {{ with .Date }}
    <div class="mt-6 flex items-center gap-6 text-sm font-mono text-gray-500">
      <span>Published {{ .Format "January 2, 2006" }}</span>
      {{ with $.ReadingTime }}
      <span>{{ . }} min read</span>
      {{ end }}
    </div>
    {{ end }}
  </header>

  {{/* Page Content */}}
  <div class="p-8 lg:p-16 grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-16">
    
    {{/* Main Content */}}
    <div class="lg:col-span-8 prose prose-invert prose-lg max-w-none
                prose-headings:font-heading prose-headings:uppercase prose-headings:tracking-wider
                prose-h2:text-white prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-6
                prose-h3:text-gray-300 prose-h3:text-xl prose-h3:mt-8 prose-h3:mb-4
                prose-p:text-gray-400 prose-p:leading-relaxed
                prose-a:text-gray-300 prose-a:underline prose-a:underline-offset-4 hover:prose-a:text-white
                prose-blockquote:border-l-white/20 prose-blockquote:text-gray-400 prose-blockquote:pl-6
                prose-code:text-gray-300 prose-code:bg-white/5 prose-code:px-2 prose-code:py-1 prose-code:font-mono prose-code:text-sm
                prose-pre:bg-dark-card prose-pre:border prose-pre:border-white/10
                prose-ul:text-gray-400 prose-ol:text-gray-400
                prose-img:border prose-img:border-white/10">
      {{ .Content }}
    </div>
    
    {{/* Sidebar / Table of Contents */}}
    <aside class="lg:col-span-4">
      {{/* Tags */}}
      {{ with .Params.tags }}
      <div class="mb-8">
        <h4 class="font-heading font-bold text-xs uppercase tracking-widest text-gray-300 mb-4 pb-2 border-b border-white/10">
          Tags
        </h4>
        <div class="flex flex-wrap gap-2">
          {{ range . }}
          <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" 
             class="px-3 py-1 text-xs font-mono text-gray-400 border border-white/10 hover:border-white/20 hover:text-white transition-colors">
            {{ . }}
          </a>
          {{ end }}
        </div>
      </div>
      {{ end }}
      
      {{/* Back link */}}
      {{ with .Section }}
      <div>
        <h4 class="font-heading font-bold text-xs uppercase tracking-widest text-gray-300 mb-4 pb-2 border-b border-white/10">
          Navigation
        </h4>
        <a href="{{ "/" | relLangURL }}{{ . }}" 
           class="inline-flex items-center gap-2 font-mono text-xs uppercase tracking-widest text-gray-300 hover:text-white transition-colors">
          <i data-lucide="arrow-left" class="w-3 h-3"></i>
          Back to {{ . | title }}
        </a>
      </div>
      {{ end }}
    </aside>
  </div>
</article>
{{ end }}
